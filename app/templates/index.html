<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="utf-8">
    <title>Home page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Import the basic jquery lib. -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script> <!-- Firebase libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-database.js"></script> <!-- OpenCV -->
    <script async src="https://docs.opencv.org/master/opencv.js" type="text/javascript"></script> <!-- OCR 引擎 -->
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <!-- CSS - 使用直接路徑暫時避免 Flask 模板語法問題 -->
    <link rel="stylesheet" href="/static/index.css">
</head>
<body>
<div class="container">

    <div class="title-wrapper">
        <img src="/static/images/left.png" alt="left" class="title-icon left-icon">
        <p id="title">藥物辨識系統</p>
        <img src="/static/images/right.png" alt="right" class="title-icon right-icon">
    </div>


    <div class="upload-buttons form-width">
        <button id="customFileButton" class="upload-btn">點擊拍照</button>
        <input type="file" id="fileInput" capture="user" accept="image/*" style="display:none;">
        <label for="uploadInput" class="upload-btn">選擇圖片</label>
        <input type="file" id="uploadInput" accept="image/*" style="display:none;">
    </div>

    <!-- 顯示辨識後圖片 -->
    <div id="photo-container" style="text-align: center; margin-bottom: 10px;"></div>

    <!-- 🔽 自動填入 + 可調整區域 -->
    <div id="result-area" class="form-width">

        <p style="font-weight:bold; color:#472601; margin-bottom:10px;">可手動修改辨識結果</p>

        <div class="selection-container">
            <label for="textResult">文字</label>
            <input type="text" id="recognizedText">
        </div>
        <div class="selection-container">
            <label for="color1">顏色一</label>
            <select id="color1">
                <option>白色</option><option>透明</option><option>黑色</option><option>棕色</option>
                <option>紅色</option><option>橘色</option><option>皮膚色</option><option>黃色</option>
                <option>綠色</option><option>藍色</option><option>紫色</option><option>粉紅色</option><option>灰色</option>
            </select>
        </div>
        <div class="selection-container">
            <label for="color2">顏色二</label>
            <select id="color2">
                <option value="">（無）</option>
                <option>白色</option><option>透明</option><option>黑色</option><option>棕色</option>
                <option>紅色</option><option>橘色</option><option>皮膚色</option><option>黃色</option>
                <option>綠色</option><option>藍色</option><option>紫色</option><option>粉紅色</option><option>灰色</option>
            </select>
        </div>
        <div class="selection-container">
            <label for="shape">外型</label>
            <select id="shape">
                <option>圓形</option>
                <option>橢圓形</option>
                <option>其他</option>
            </select>
        </div>
        <br>
        <div class="match-btn-wrapper">
            <button id="match-button" class="btn-14">確認藥物比對</button>
        </div>
    </div>
</div>

<!-- Modal 視窗 -->
<div id="resultModal"
     style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center;">
    <div style="background:#fff; width:70%; max-width:800px; padding:20px; border-radius:10px; display:flex; flex-direction:column; gap:15px; position:relative;">
        <!-- 關閉按鈕 --> <span id="closeModal"
                                style="position:absolute; top:10px; right:15px; font-size:20px; cursor:pointer;">✖</span>
        <!-- 候選卡片清單（單一或多候選都用這個容器渲染） -->
        <div id="modalTextArea"
             style="width:100%; display:flex; flex-direction:column; max-height:80vh; overflow-y:auto;">
            <div id="candidateList" style="display:flex; flex-direction:column; gap:15px;"></div>
        </div>
    </div>
</div> <!-- JS - 使用直接路徑暫時避免 Flask 模板語法問題 -->
<script type="module" src="/static/index.js"></script>
</body>
</html>